# ARP - 地址解析协议

一种解决地址映射关系问题的协议，以目标IP地址为线索，用来定位下一个应该接收数据帧的网络设备，所对应的MAC地址，如果目标主机不在同一个链路上时，可以通过ARP查找下一跳路由器的MAC地址（代理ARP技术），不过ARP只适用于IPv4，不能用于IPv6.IPv6中可以用ICMPv6代替ARP发送邻居探索消息。

 - 不需要ARP的网络（点对点网络）
  - PPP点对点网络
  - 点对点GRE网络
  - IPSec VTI隧道网络
  - 存储FC网络
  - 数据中心FP网络
 - 需要ARP的网络（多路访问网络）
  - 以太网（支持广播的多路访问网络）
  - 多点帧中继（非广播的多路访问网络）
  - DMVPN的多点GRE（非广播多路访问网络）


- 用于以太网的ARP请求或应答分组格式

![](/tcp_ip/images/arp-01.jpeg)

### 特殊ARP

- 免费ARP （Gratuitous ARP）

 - 宣告广播的作用，以告诉整个广播域，目前这个IP所对应的MAC地址是什么（网络设备冷备）
 - 看看广播域内有没有别的主机使用自己的IP，如果使用了，则在界面上弹出“IP冲突”字样（防止地址冲突）

- 代理ARP （Proxy ARP）
 -  正面意义
   - NAT到外部直连
 - 弊端
   - Proxy ARP环路问题
   - VPN地址池选择问题

总结：尽量不要使用Proxy ARP技术，推荐使用标准的路由技术

### ARP欺骗
